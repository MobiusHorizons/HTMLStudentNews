/*! HTMLStudentNews 2014-02-13 */
function JSONP_makeCb(a){var b="jsonpCB.cb"+a;return jsonpCB["cb"+a]=function(b){200==b.responseStatus&&(JSONP_DATA[a].success(b),JSONP_cleanCb(a))},b}function JSONP_cleanCb(a){jsonpCB["cb"+a]=null,document.getElementsByTagName("head")[0].removeChild(JSONP_DATA[a].script)}function JSONP(a){var b=JSONP_DATA.push(a),c=/(=)\?(?=&|$)|\?\?/,d=document.createElement("script"),e=JSONP_makeCb(b);a.url=a.url.replace(c,"$1"+e),d.src=a.url,a.script=d,JSONP_DATA[b]=a,document.getElementsByTagName("head")[0].appendChild(d)}function getID(a){return document.getElementById(a)}function getClass(a){return document.getElementsByClassName(a)}function setTitle(a){return"complete"!=document.readyState?void init(function(){setTitle(a)}):(UI.nav.caption.innerHTML=a,void(document.title=UI.nav.caption.childNodes[0].nodeValue))}function makeNav(){var a,b,c=document.getElementsByTagName("header")[0],b=document.createElement("button");b.classList.add("left","arrow"),b.label=document.createElement("div"),b.label.classList.add("label");var a=document.createElement("h1");a.classList.add("nav-title");var d=document.createElement("button");return d.classList.add("right"),c.caption=c.appendChild(a),UI.nav=c,UI.nav.back=b,UI.nav.next=d,c}function navBack(a){var b=UI.nav.back,c=UI.nav;if(a){b.classList.remove("hidden"),b.label.innerHTML="Home";var d=b.appendChild(b.label);b.addEventListener("click",goBack),UI.nav.back=c.insertBefore(b,c.caption),UI.nav.back.label=d}else b.classList.add("hidden"),c.removeChild(b),b.removeEventListener("click",goBack);UI.nav_redraw()}function parseRSS(a,b){JSONP({url:"http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&num=-1&q="+encodeURIComponent(a),dataType:"jsonp",success:function(a){b(a.responseData.feed)}})}function goBack(){clear(),data(Data),navBack(!1)}function entryView(a){var b=Data.entries[a],c=clear(),d=contentDiv({},b.title,b.content);d.classList.add("entry-view"),d.classList.add("slide-in-right"),a=parseInt(a),Hammer(d).on("swiperight",function(){a>0&&(a--,location.hash="",location.hash="entryID="+a,routing())}),Hammer(d).on("swipeleft",function(){a<Data.entries.length&&(a++,location.hash="",location.hash="entryID="+a,routing())}),c.appendChild(d),navBack(!0)}function load(a){{var b=a.target;Data.entries[b.index]}location.hash="entryID="+b.index,entryView(b.index)}function clear(){return content=getID("content"),content?(content.innerHTML="",content.scroll=0,content):void 0}function collapse(){clear(),data(Data)}function entryListItem(a,b){var c=document.createElement("li");for(var d in a)c[d]=a[d];return c.innerHTML+=b,c.classList.add("content"),c}function contentDiv(a,b,c){var d=document.createElement("div");for(var e in a)d[e]=a[e];d.classList.add("content");var f=document.createElement("h4");return f.innerHTML=b,f.classList.add("content-title"),d.appendChild(f),c&&(d.innerHTML+=c),d.div=d,f.div=d,d.title=f,d}function data(a){location.hash="",content=document.getElementById("content");var b=document.createElement("ul");for(b.classList.add("arrowed"),Data=a,i=0;i<a.entries.length;i++){entry=a.entries[i];var c={};c.index=i,c=entryListItem(c,entry.title),c.classList.add("list-item"),c.classList.add("innerLI"),c.onclick=load,b.appendChild(c)}content.appendChild(b)}function updateData(a){parseRSS(URL,function(b){Data=b,setTitle(b.title),void 0!=a&&a()})}function init(a){if(void 0!=a&&"function"==typeof a&&onReadyfuns.push(a),"complete"==document.readyState){window.addEventListener("hashchange",routing,!1),makeNav();for(a in onReadyfuns)onReadyfuns[a]()}}function routing(){if(!Data)return void updateData(routing);if("complete"!=document.readyState)return void init(routing);var a=document.getElementsByTagName("*");if("#android"==location.hash){for(var b=0;b<a.length;b++)a[b].classList.add("android"),a[b].classList.remove("ios7");location.hash=""}else if("#ios7"==location.hash){for(var b=0;b<a.length;b++)a[b].classList.add("ios7"),a[b].classList.remove("android");location.hash=""}if("#"==location.hash||""==location.hash)clear(),data(Data);else{var c=/#entryID=(.*)$/.exec(location.hash);c.length>=1&&entryView(c[1])}}var jsonpCB={},JSONP_DATA=[],style={},UI={};UI.nav={},UI.nav_redraw=function(){UI.nav.caption.style.margin=UI.nav.back&&!UI.nav.back.classList.contains("hidden")?"0 "+UI.nav.back.clientWidth:"0px"},URL="http://www.worldh.org/calvin-student-news/rss/esn-latest-issue.rss",Data=!1,onReadyfuns=[],document.onload=updateData(routing),document.onreadystatechange=init;